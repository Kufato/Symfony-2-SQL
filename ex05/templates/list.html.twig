{% extends 'base.html.twig' %}

{% block content %}
    <h1>Liste des utilisateurs</h1>

    {# Affichage des messages flash #}
    {% for msg in app.flashes('result') %}
        <div class="alert alert-success">{{ msg }}</div>
    {% endfor %}
    {% for msg in app.flashes('error') %}
        <div class="alert alert-danger">{{ msg }}</div>
    {% endfor %}

    {% if users is empty %}
        <p>Aucun utilisateur trouv√©.</p>
    {% else %}
        <table border="1" cellpadding="5">
            <tr>
                <th>ID</th>
                <th>Nom</th>
                <th>Email</th>
                <th>Actions</th>
            </tr>
            {% for user in users %}
                <tr>
                    <td>{{ user.id }}</td>
                    <td>{{ user.name }}</td>
                    <td>{{ user.email }}</td>
                    <td>
                        <a href="{{ path('ex05_delete', {'id': user.id}) }}" onclick="return confirm('Supprimer cet utilisateur ?')">Supprimer</a>
                    </td>
                </tr>
            {% endfor %}
        </table>
    {% endif %}

    <br>
    <button>
        <a href="{{ path('ex05_form') }}">Ajouter un utilisateur</a>
    </button>
        |
    <button>
        <a href="{{ path('ex05_home') }}">Accueil</a>
    </button>
{% endblock %}